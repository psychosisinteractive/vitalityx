\hypertarget{a00143}{}\section{libc/vitality/tty.h File Reference}
\label{a00143}\index{libc/vitality/tty.\+h@{libc/vitality/tty.\+h}}
This graph shows which files directly or indirectly include this file\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{a00143_a5b5bf610a57f3c59b2851fa2652081ec_a5b5bf610a57f3c59b2851fa2652081ec}{tty\+\_\+putstring} (char $\ast$string, int len)
\begin{DoxyCompactList}\small\item\em Puts a string in V\+R\+AM, Text mode only. \end{DoxyCompactList}\item 
void \hyperlink{a00143_a05ca3f5e64f38fec173b635ca8465415_a05ca3f5e64f38fec173b635ca8465415}{tty\+\_\+vgaputstring} (char $\ast$string, int len)
\begin{DoxyCompactList}\small\item\em Puts a string into V\+R\+AM, Mode 13 only. \end{DoxyCompactList}\item 
void \hyperlink{a00143_ade960b1320324706aac6c00cc6b1b2fe_ade960b1320324706aac6c00cc6b1b2fe}{tty\+\_\+pputstring} (char $\ast$string)
\begin{DoxyCompactList}\small\item\em Puts a string into V\+R\+AM, detects preferred mode. \end{DoxyCompactList}\item 
void \hyperlink{a00143_abaf93f9e56ddb7b10462070f59e534e4_abaf93f9e56ddb7b10462070f59e534e4}{tty\+\_\+pputstringl} (char $\ast$string, int len)
\begin{DoxyCompactList}\small\item\em Puts a string into V\+R\+AM, detects preferred mode, uses length. \end{DoxyCompactList}\item 
void \hyperlink{a00143_a6215de17c731a2ff0d61587c39b15375_a6215de17c731a2ff0d61587c39b15375}{drawchar3} (unsigned char c, unsigned char forecolor, unsigned char backcolor, int x, int y)
\begin{DoxyCompactList}\small\item\em Draws a character at x and y in Mode 3. \end{DoxyCompactList}\item 
void \hyperlink{a00143_aff4bc17c602603d120756f52e18ebb96_aff4bc17c602603d120756f52e18ebb96}{clearscreen} ()
\begin{DoxyCompactList}\small\item\em Clears the console. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{a00143_aff4bc17c602603d120756f52e18ebb96_aff4bc17c602603d120756f52e18ebb96}\label{a00143_aff4bc17c602603d120756f52e18ebb96_aff4bc17c602603d120756f52e18ebb96}} 
\index{tty.\+h@{tty.\+h}!clearscreen@{clearscreen}}
\index{clearscreen@{clearscreen}!tty.\+h@{tty.\+h}}
\subsubsection{\texorpdfstring{clearscreen()}{clearscreen()}}
{\footnotesize\ttfamily void clearscreen (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Clears the console. 



Definition at line 72 of file tty.\+c.


\begin{DoxyCode}
72                    \{
73     \hyperlink{a00110_a9e432f267691eceb2e2e0efcc37efbc9_a9e432f267691eceb2e2e0efcc37efbc9}{memset}(0xb8000,0,80*25);
74     \hyperlink{a00140_abaa0d20f0e52ce0d3a7d706f6ac16266_abaa0d20f0e52ce0d3a7d706f6ac16266}{xoff} = 0;
75     \hyperlink{a00140_a1a7539764d0ae8cd06ce45c62cf92bca_a1a7539764d0ae8cd06ce45c62cf92bca}{yoff} = 0;
76     \hyperlink{a00140_ae69604af0f9bd5fca2a016d0aa1ba7e1_ae69604af0f9bd5fca2a016d0aa1ba7e1}{cursor\_x} = \hyperlink{a00140_abaa0d20f0e52ce0d3a7d706f6ac16266_abaa0d20f0e52ce0d3a7d706f6ac16266}{xoff};
77     \hyperlink{a00140_a0301c5492919c401c2c1ecf52af709b0_a0301c5492919c401c2c1ecf52af709b0}{cursor\_y} = \hyperlink{a00140_a1a7539764d0ae8cd06ce45c62cf92bca_a1a7539764d0ae8cd06ce45c62cf92bca}{yoff};
78     \hyperlink{a00140_a492f5021d7340613e732ef37bbaa04e4_a492f5021d7340613e732ef37bbaa04e4}{update\_cursor}(\hyperlink{a00140_ae69604af0f9bd5fca2a016d0aa1ba7e1_ae69604af0f9bd5fca2a016d0aa1ba7e1}{cursor\_x},\hyperlink{a00140_ae69604af0f9bd5fca2a016d0aa1ba7e1_ae69604af0f9bd5fca2a016d0aa1ba7e1}{cursor\_x});
79 \}
\end{DoxyCode}
\mbox{\Hypertarget{a00143_a6215de17c731a2ff0d61587c39b15375_a6215de17c731a2ff0d61587c39b15375}\label{a00143_a6215de17c731a2ff0d61587c39b15375_a6215de17c731a2ff0d61587c39b15375}} 
\index{tty.\+h@{tty.\+h}!drawchar3@{drawchar3}}
\index{drawchar3@{drawchar3}!tty.\+h@{tty.\+h}}
\subsubsection{\texorpdfstring{drawchar3()}{drawchar3()}}
{\footnotesize\ttfamily void drawchar3 (\begin{DoxyParamCaption}\item[{unsigned char}]{c,  }\item[{unsigned char}]{forecolor,  }\item[{unsigned char}]{backcolor,  }\item[{int}]{x,  }\item[{int}]{y }\end{DoxyParamCaption})}



Draws a character at x and y in Mode 3. 


\begin{DoxyParams}{Parameters}
{\em c} & The character \\
\hline
{\em forecolor} & The foreground color \\
\hline
{\em backcolor} & The backgroud color \\
\hline
{\em x} & The x position \\
\hline
{\em y} & The y position \\
\hline
\end{DoxyParams}


Definition at line 61 of file tty.\+c.


\begin{DoxyCode}
62 \{
63      \hyperlink{a00116_a273cf69d639a59973b6019625df33e30_a273cf69d639a59973b6019625df33e30}{uint16\_t} attrib = (backcolour << 4) | (forecolour & 0x0F);
64      \textcolor{keyword}{volatile} \hyperlink{a00116_a273cf69d639a59973b6019625df33e30_a273cf69d639a59973b6019625df33e30}{uint16\_t} * where;
65      where = (\textcolor{keyword}{volatile} \hyperlink{a00116_a273cf69d639a59973b6019625df33e30_a273cf69d639a59973b6019625df33e30}{uint16\_t} *)0xB8000 + (y * 80 + x) ;
66      *where = c | (attrib << 8);
67 \}
\end{DoxyCode}
\mbox{\Hypertarget{a00143_ade960b1320324706aac6c00cc6b1b2fe_ade960b1320324706aac6c00cc6b1b2fe}\label{a00143_ade960b1320324706aac6c00cc6b1b2fe_ade960b1320324706aac6c00cc6b1b2fe}} 
\index{tty.\+h@{tty.\+h}!tty\+\_\+pputstring@{tty\+\_\+pputstring}}
\index{tty\+\_\+pputstring@{tty\+\_\+pputstring}!tty.\+h@{tty.\+h}}
\subsubsection{\texorpdfstring{tty\+\_\+pputstring()}{tty\_pputstring()}}
{\footnotesize\ttfamily void tty\+\_\+pputstring (\begin{DoxyParamCaption}\item[{char $\ast$}]{string }\end{DoxyParamCaption})}



Puts a string into V\+R\+AM, detects preferred mode. 


\begin{DoxyParams}{Parameters}
{\em string} & The string to put \\
\hline
\end{DoxyParams}


Definition at line 91 of file tty.\+c.


\begin{DoxyCode}
91                                   \{
92     \textcolor{keywordflow}{switch} (\hyperlink{a00041_af6d170c9401ea8f94d4c5cf09347cca7_af6d170c9401ea8f94d4c5cf09347cca7}{vgamode}())
93     \{
94     \textcolor{keywordflow}{case} 0x3:
95         \hyperlink{a00140_a5b5bf610a57f3c59b2851fa2652081ec_a5b5bf610a57f3c59b2851fa2652081ec}{tty\_putstring}(\textcolor{keywordtype}{string},0);
96         \textcolor{keywordflow}{break};
97     \textcolor{keywordflow}{case} 0x13:
98         \hyperlink{a00140_a05ca3f5e64f38fec173b635ca8465415_a05ca3f5e64f38fec173b635ca8465415}{tty\_vgaputstring}(\textcolor{keywordtype}{string},0);
99         \textcolor{keywordflow}{break};
100     \textcolor{keywordflow}{default}:
101         \hyperlink{a00140_a05ca3f5e64f38fec173b635ca8465415_a05ca3f5e64f38fec173b635ca8465415}{tty\_vgaputstring}(\textcolor{keywordtype}{string},0);
102         \textcolor{keywordflow}{break};
103     \}
104 \}
\end{DoxyCode}
\mbox{\Hypertarget{a00143_abaf93f9e56ddb7b10462070f59e534e4_abaf93f9e56ddb7b10462070f59e534e4}\label{a00143_abaf93f9e56ddb7b10462070f59e534e4_abaf93f9e56ddb7b10462070f59e534e4}} 
\index{tty.\+h@{tty.\+h}!tty\+\_\+pputstringl@{tty\+\_\+pputstringl}}
\index{tty\+\_\+pputstringl@{tty\+\_\+pputstringl}!tty.\+h@{tty.\+h}}
\subsubsection{\texorpdfstring{tty\+\_\+pputstringl()}{tty\_pputstringl()}}
{\footnotesize\ttfamily void tty\+\_\+pputstringl (\begin{DoxyParamCaption}\item[{char $\ast$}]{string,  }\item[{int}]{len }\end{DoxyParamCaption})}



Puts a string into V\+R\+AM, detects preferred mode, uses length. 


\begin{DoxyParams}{Parameters}
{\em string} & The string to put \\
\hline
{\em len} & The length \\
\hline
\end{DoxyParams}


Definition at line 106 of file tty.\+c.


\begin{DoxyCode}
106                                             \{
107     \textcolor{keywordflow}{switch} (\hyperlink{a00041_af6d170c9401ea8f94d4c5cf09347cca7_af6d170c9401ea8f94d4c5cf09347cca7}{vgamode}())
108     \{
109     \textcolor{keywordflow}{case} 0x3:
110         \hyperlink{a00140_a5b5bf610a57f3c59b2851fa2652081ec_a5b5bf610a57f3c59b2851fa2652081ec}{tty\_putstring}(\textcolor{keywordtype}{string},len);
111         \textcolor{keywordflow}{break};
112     \textcolor{keywordflow}{case} 0x13:
113         \hyperlink{a00140_a05ca3f5e64f38fec173b635ca8465415_a05ca3f5e64f38fec173b635ca8465415}{tty\_vgaputstring}(\textcolor{keywordtype}{string},len);
114         \textcolor{keywordflow}{break};
115     \textcolor{keywordflow}{default}:
116         \hyperlink{a00140_a05ca3f5e64f38fec173b635ca8465415_a05ca3f5e64f38fec173b635ca8465415}{tty\_vgaputstring}(\textcolor{keywordtype}{string},len);
117         \textcolor{keywordflow}{break};
118     \}
119 \}
\end{DoxyCode}
\mbox{\Hypertarget{a00143_a5b5bf610a57f3c59b2851fa2652081ec_a5b5bf610a57f3c59b2851fa2652081ec}\label{a00143_a5b5bf610a57f3c59b2851fa2652081ec_a5b5bf610a57f3c59b2851fa2652081ec}} 
\index{tty.\+h@{tty.\+h}!tty\+\_\+putstring@{tty\+\_\+putstring}}
\index{tty\+\_\+putstring@{tty\+\_\+putstring}!tty.\+h@{tty.\+h}}
\subsubsection{\texorpdfstring{tty\+\_\+putstring()}{tty\_putstring()}}
{\footnotesize\ttfamily void tty\+\_\+putstring (\begin{DoxyParamCaption}\item[{char $\ast$}]{string,  }\item[{int}]{len }\end{DoxyParamCaption})}



Puts a string in V\+R\+AM, Text mode only. 


\begin{DoxyParams}{Parameters}
{\em string} & The string to put \\
\hline
{\em len} & The length \\
\hline
\end{DoxyParams}


Definition at line 10 of file tty.\+c.


\begin{DoxyCode}
10                                           \{
11     \textcolor{keywordflow}{if}(len == 0) \{
12         len = \hyperlink{a00116_a689b119da994dece91d44b5aeac643ed_a689b119da994dece91d44b5aeac643ed}{USHRT\_MAX};
13     \}
14     \textcolor{keywordtype}{char} chara = *\textcolor{keywordtype}{string}++;
15     \hyperlink{a00140_a3d09038c7b6436e60b228f2f3f451f6a_a3d09038c7b6436e60b228f2f3f451f6a}{disable\_cursor}();
16     len += 0xb8000;
17     \textcolor{keywordflow}{while}(chara != \textcolor{stringliteral}{'\(\backslash\)x0'} | !(\textcolor{keywordtype}{string} < (\hyperlink{a00116_a295f71165288684c38c6bb836fbb3c59_a295f71165288684c38c6bb836fbb3c59}{addr\_t})len)) \{
18         \textcolor{keywordflow}{switch}(chara) \{
19             \textcolor{keywordflow}{case} \textcolor{charliteral}{'\(\backslash\)n'}:
20                 \hyperlink{a00140_a0301c5492919c401c2c1ecf52af709b0_a0301c5492919c401c2c1ecf52af709b0}{cursor\_y}++;
21                 \hyperlink{a00140_ae69604af0f9bd5fca2a016d0aa1ba7e1_ae69604af0f9bd5fca2a016d0aa1ba7e1}{cursor\_x} = 0;
22                 \textcolor{keywordflow}{break};
23             \textcolor{keywordflow}{default}:
24                 \hyperlink{a00059_aa2123d399356fa4ded8a39fdc167f31a_aa2123d399356fa4ded8a39fdc167f31a}{BochsConsolePrintChar}(chara);
25                 \hyperlink{a00140_acb9a978008cfa67b0038e85eb56d2d41_acb9a978008cfa67b0038e85eb56d2d41}{drawchar3}(chara,0x7,0x0,\hyperlink{a00140_ae69604af0f9bd5fca2a016d0aa1ba7e1_ae69604af0f9bd5fca2a016d0aa1ba7e1}{cursor\_x},\hyperlink{a00140_a0301c5492919c401c2c1ecf52af709b0_a0301c5492919c401c2c1ecf52af709b0}{cursor\_y});
26                 \hyperlink{a00140_ae69604af0f9bd5fca2a016d0aa1ba7e1_ae69604af0f9bd5fca2a016d0aa1ba7e1}{cursor\_x}++;
27                 \textcolor{keywordflow}{break};
28         \}
29         \textcolor{comment}{// get next character}
30         chara = *\textcolor{keywordtype}{string}++;
31     \}
32     \hyperlink{a00140_afe197dc4dbfa6036ef04abd2aeeeca2d_afe197dc4dbfa6036ef04abd2aeeeca2d}{enable\_cursor}(0,15);
33     \hyperlink{a00140_a492f5021d7340613e732ef37bbaa04e4_a492f5021d7340613e732ef37bbaa04e4}{update\_cursor}(\hyperlink{a00140_ae69604af0f9bd5fca2a016d0aa1ba7e1_ae69604af0f9bd5fca2a016d0aa1ba7e1}{cursor\_x},\hyperlink{a00140_a0301c5492919c401c2c1ecf52af709b0_a0301c5492919c401c2c1ecf52af709b0}{cursor\_y});
34 \}
\end{DoxyCode}
\mbox{\Hypertarget{a00143_a05ca3f5e64f38fec173b635ca8465415_a05ca3f5e64f38fec173b635ca8465415}\label{a00143_a05ca3f5e64f38fec173b635ca8465415_a05ca3f5e64f38fec173b635ca8465415}} 
\index{tty.\+h@{tty.\+h}!tty\+\_\+vgaputstring@{tty\+\_\+vgaputstring}}
\index{tty\+\_\+vgaputstring@{tty\+\_\+vgaputstring}!tty.\+h@{tty.\+h}}
\subsubsection{\texorpdfstring{tty\+\_\+vgaputstring()}{tty\_vgaputstring()}}
{\footnotesize\ttfamily void tty\+\_\+vgaputstring (\begin{DoxyParamCaption}\item[{char $\ast$}]{string,  }\item[{int}]{len }\end{DoxyParamCaption})}



Puts a string into V\+R\+AM, Mode 13 only. 


\begin{DoxyParams}{Parameters}
{\em string} & The string to put \\
\hline
{\em len} & The length \\
\hline
\end{DoxyParams}


Definition at line 81 of file tty.\+c.


\begin{DoxyCode}
81                                              \{
82     \hyperlink{a00056_a19e1f554d03c977f8b947f21489daa41_a19e1f554d03c977f8b947f21489daa41}{BochsConsolePrintString}(\textcolor{keywordtype}{string});
83     \textcolor{keywordtype}{char} chara = *\textcolor{keywordtype}{string}++;
84     \textcolor{keywordflow}{while}(chara != \textcolor{stringliteral}{'\(\backslash\)x0'}) \{
85         \hyperlink{a00041_a2c8df7a20b47341b70d97a7ff21d86ea_a2c8df7a20b47341b70d97a7ff21d86ea}{drawchar}(chara,\hyperlink{a00140_abaa0d20f0e52ce0d3a7d706f6ac16266_abaa0d20f0e52ce0d3a7d706f6ac16266}{xoff},\hyperlink{a00140_a1a7539764d0ae8cd06ce45c62cf92bca_a1a7539764d0ae8cd06ce45c62cf92bca}{yoff}+17,0xf,0x0);
86         \hyperlink{a00140_abaa0d20f0e52ce0d3a7d706f6ac16266_abaa0d20f0e52ce0d3a7d706f6ac16266}{xoff} += 8;
87         chara = *\textcolor{keywordtype}{string}++;
88     \}
89 \}
\end{DoxyCode}
